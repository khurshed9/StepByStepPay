# Слой Application

### Слой Application отвечает за бизнес-логику приложения. Здесь находятся сервисы, управляющие процессами, связанными с расчетами, проверкой данных и другими ключевыми операциями.

# Основные компоненты слоя Application

## 1. Контракты (Contracts)

### Контракты определяют интерфейсы, которые используются для описания взаимодействий между различными компонентами приложения. Это могут быть:

### Интерфейсы для сервисов (IProductService, IPaymentService).

### Интерфейсы для репозиториев (IProductRepository, IPurchaseRepository).

### Контракты позволяют определить строгую структуру взаимодействия между слоями, упрощая внедрение зависимостей.

## 2. DTO (Data Transfer Objects)

### Объекты передачи данных используются для обмена данными между различными слоями приложения. Примеры DTO:

### ProductUpdateInfo: для обновления информации о продукте.

### InstallmentRequest: для передачи данных о запросе рассрочки.

### InstallmentResponse: для передачи рассчитанной информации о рассрочке.

### DTO изолируют внутренние структуры сущностей от внешнего взаимодействия.

## 3. Мапперы (Mappers)

### Мапперы преобразуют данные из одной модели в другую. Например, преобразование DTO в сущности и обратно. Это используется для преобразования данных из слоя WebAPI в объекты слоя Domain.

## Пример:

### InstallmentMapper: преобразует InstallmentRequest в соответствующую сущность Domain.

# 4. Логика рассрочки

## Слой Application содержит ключевую бизнес-логику, связанную с расчетами рассрочки:

### Проверка корректности диапазона рассрочки в зависимости от категории товара.

### Расчет дополнительной процентной ставки в зависимости от количества месяцев рассрочки.

## Пример задачи:                                              
### - Если категория "Смартфон" и срок рассрочки 6 месяцев:
### - Проверить, что 6 входит в диапазон [3-9].
### - Рассчитать дополнительный процент: (6 - 3) * 3%.                                     

# 5. Фильтры и пагинация

### Сервисные методы реализуют логику фильтрации и пагинации для работы с большим объемом данных. Эти функции полезны при работе с коллекциями продуктов или платежей.

## Пример:

### Метод ApplyPagination возвращает определённое количество записей на основании параметров страницы и размера страницы.

# 6. Результаты операций (Result)

## В проекте используется паттерн "Result" для обработки результатов операций:

### BaseResult: базовый класс для успешных и неуспешных результатов.

### Result<T>: результат с данными, например, результат расчёта рассрочки.

# Преимущества:

### Централизованное управление ошибками.

### Единый формат успешных и неуспешных ответов.

# 7. Пример обработки рассрочки

### Основной процесс обработки рассрочки включает:

### Проверку входных данных.

### Валидацию срока рассрочки на основе категории товара.

### Расчет общей суммы платежа.

### Формирование ответа (DTO) с деталями рассрочки.

## Пример процесса:                         
### - Клиент отправляет запрос: Смартфон, сумма 1000, 6 месяцев.
### - Приложение проверяет, что срок рассрочки валиден для категории.
### - Рассчитывается итоговая сумма: 1000 + 9% = 1090.
### - Возвращается результат клиенту.      Заключение

# Слой Application является сердцем проекта, реализующим бизнес-логику и поддерживающим взаимодействие между слоями. Его ключевые элементы, такие как контракты, DTO, мапперы и обработка результатов, делают систему модульной, поддерживаемой и легко расширяемой.