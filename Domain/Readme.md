## Структура проекта: Domain

Слой **Domain** представляет собой часть приложения, которая содержит бизнес-логику, сущности и вспомогательные классы, такие как перечисления, константы и расширения. Этот слой отвечает за описание сущностей, их атрибутов и правила взаимодействия между ними.

### Основные компоненты в Domain

1. **BaseEntity**:
    - `BaseEntity` — это базовый класс для всех сущностей в проекте, который содержит общие свойства, такие как:
        - `Id`: уникальный идентификатор сущности.
        - `Version`: версия сущности для обеспечения управления изменениями (например, для оптимистической блокировки).
        - `CreatedAt`, `UpdatedAt`: метки времени для отслеживания времени создания и обновления сущности.
        - `IsDeleted`, `DeletedAt`: флаги и метки времени для логического удаления сущности.

   Все сущности, такие как `Product` и `Purchase`, наследуют от `BaseEntity`, что обеспечивает единообразие и добавление общей функциональности для всех сущностей.

2. **Error**:
    - `Error` представляет информацию об ошибке, которая может возникнуть в ходе выполнения операций. Содержит детали ошибки, такие как:
        - Тип ошибки (`ErrorType`), например, "NotFound" или "BadRequest".
        - Сообщение об ошибке для более подробного описания причины.
        - Дополнительные данные или контекст, связанные с ошибкой.

3. **Global Using**:
    - Глобальные директивы `using` используются для того, чтобы избежать дублирования и сделать код чище. Вместо того чтобы прописывать `using` в каждом файле, они определяются на уровне проекта, что упрощает работу и улучшает читаемость.

4. **Constants**:
    - Константы, такие как `Category` в классе `Category`, используются для хранения фиксированных значений, которые не меняются в ходе работы приложения. Пример:
        - `SmartPhone`, `Computer`, `Television` — категории продуктов. Эти константы обеспечивают единообразие и предотвращают появление ошибок, связанных с "магическими строками" в коде.

   Пример:
   ```csharp
   public class Category
   {
       public const string SmartPhone = "SmartPhone";
       public const string Computer = "Computer";
       public const string Television = "Television";
   }

### 5. **EntityExtension**

`EntityExtension` содержит расширения для сущностей, которые позволяют добавлять дополнительную логику или функциональность сущностям без необходимости изменять их исходный код. Это помогает улучшить модульность кода и делает его более читаемым и гибким, позволяя централизованно изменять логику для разных сущностей.

#### Пример использования:
В `EntityExtension` есть метод расширения `ToDelete`, который используется для пометки сущности как удаленной. Этот метод обновляет свойства сущности, такие как `Version`, `UpdatedAt`, `IsDeleted`, и `DeletedAt`, не изменяя саму сущность. Это полезно, например, для реализации логического удаления, где объект не удаляется из базы данных, но помечается как удаленный.

Пример кода:
```csharp
public static class EntityExtension
{
    public static BaseEntity ToDelete(this BaseEntity entity)
    {
        entity.Version++;  // Увеличение версии сущности для отслеживания изменений
        entity.UpdatedAt = DateTimeOffset.UtcNow;  // Обновление времени изменения
        entity.IsDeleted = true;  // Пометка сущности как удаленной
        entity.DeletedAt = DateTimeOffset.UtcNow;  // Установка времени удаления
        return entity;  // Возвращаем обновленную сущность
    }
}
